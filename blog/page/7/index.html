
<!DOCTYPE HTML>
<html>
<head>
	<meta charset="utf-8">
	<title>Will Anderson</title>
	<meta name="author" content="Will Anderson">

	
	<meta name="description" content="The WordPress installation process is already incredibly simple, but because I often find myself setting up fresh installations of WordPress for &hellip;">
	
	<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">

	<link href="/atom.xml" rel="alternate" title="Will Anderson" type="application/atom+xml">
	<link rel="canonical" href="">
	<link href="/favicon.ico" rel="shortcut icon">
	<link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
	<!--[if lt IE 9]><script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script><![endif]-->
	<script src="//code.jquery.com/jquery-1.11.0.min.js"></script>
	
</head>

<body>
	<header id="header" class="inner"><h1><a href="/">Will Anderson</a></h1>
<nav id="main-nav"><ul class="main">
	<li><a href="/about">About</a></li>
	<li><a href="/plugins">WordPress Plugins</a></li>
	<li><a href="/node-modules">Node Modules</a></li>
	<li><a href="/blog/archives">Archives</a></li>
</ul>
</nav>
<nav id="mobile-nav">
	<div class="alignleft menu">
		<a class="button">Menu</a>
		<div class="container"><ul class="main">
	<li><a href="/about">About</a></li>
	<li><a href="/plugins">WordPress Plugins</a></li>
	<li><a href="/node-modules">Node Modules</a></li>
	<li><a href="/blog/archives">Archives</a></li>
</ul>
</div>
	</div>
	<div class="alignright search">
		<a class="button"></a>
		<div class="container">
			<form action="https://www.google.com/search" method="get">
				<input type="text" name="q" results="0">
				<input type="hidden" name="q" value="site:willi.am">
			</form>
		</div>
	</div>
</nav>
<nav id="sub-nav" class="alignright">
	<div class="social">
		
		
		
		<a class="twitter" href="http://twitter.com/itsananderson" title="Twitter">Twitter</a>
		
		
		<a class="github" href="https://github.com/itsananderson" title="GitHub">GitHub</a>
		
    
		
		
		
		
		
		<a class="rss" href="/atom.xml" title="RSS">RSS</a>
		
    
	</div>
	<form class="search" action="https://www.google.com/search" method="get">
		<input class="alignright" type="text" name="q" results="0">
		<input type="hidden" name="q" value="site:willi.am">
	</form>
</nav>

</header>
	
		
	
	<div id="content" class="inner">


    <article class="post">
	<h2 class="title">
		
		<a href="/blog/2010/03/12/wordpress-installation-script/">
		
			WordPress Installation Script</a>
	</h2>
	<div class="entry-content">
		<p>The WordPress installation process is already incredibly simple, but because I often find myself setting up fresh installations of WordPress for various reasons, I decided to make it even easier.</p>

<p>The following script takes a folder name as an argument, creates that folder in the website root (specified in a config variable of the script), downloads and extracts the latest version of WordPress into that folder, and runs the WordPress install. Finally, it sets the admin password to the password specified in another config variable and removes the password change nag.</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
<span class='line-number'>31</span>
<span class='line-number'>32</span>
<span class='line-number'>33</span>
<span class='line-number'>34</span>
<span class='line-number'>35</span>
<span class='line-number'>36</span>
<span class='line-number'>37</span>
<span class='line-number'>38</span>
<span class='line-number'>39</span>
<span class='line-number'>40</span>
<span class='line-number'>41</span>
<span class='line-number'>42</span>
<span class='line-number'>43</span>
<span class='line-number'>44</span>
<span class='line-number'>45</span>
<span class='line-number'>46</span>
<span class='line-number'>47</span>
<span class='line-number'>48</span>
<span class='line-number'>49</span>
<span class='line-number'>50</span>
</pre></td><td class='code'><pre><code class='sh'><span class='line'><span class="c">#!/bin/bash</span>
</span><span class='line'><span class="c">#</span>
</span><span class='line'><span class="c"># configuration</span>
</span><span class='line'><span class="c">#</span>
</span><span class='line'><span class="nv">rootURL</span><span class="o">=</span><span class="s2">&quot;http://localhost&quot;</span> <span class="c"># your root URL. No trailing slash</span>
</span><span class='line'><span class="nv">rootDIR</span><span class="o">=</span><span class="s2">&quot;/home/anderswc/public_html&quot;</span> <span class="c"># your document root. No trailing slash</span>
</span><span class='line'>
</span><span class='line'><span class="nv">dbname</span><span class="o">=</span><span class="s2">&quot;wordpress&quot;</span>
</span><span class='line'><span class="nv">dbuser</span><span class="o">=</span><span class="s2">&quot;username&quot;</span>
</span><span class='line'><span class="nv">dbpass</span><span class="o">=</span><span class="s2">&quot;password&quot;</span>
</span><span class='line'><span class="nv">dbhost</span><span class="o">=</span><span class="s2">&quot;localhost&quot;</span>
</span><span class='line'>
</span><span class='line'><span class="nv">wppass</span><span class="o">=</span><span class="s2">&quot;password&quot;</span> <span class="c">#password to use for the admin account</span>
</span><span class='line'><span class="nv">adminemail</span><span class="o">=</span><span class="s2">&quot;email@example.com&quot;</span> <span class="c">#email to use for the admin account</span>
</span><span class='line'><span class="nv">blogtitle</span><span class="o">=</span><span class="nv">$1</span> <span class="c"># defaults to the specified directory name. can be anything</span>
</span><span class='line'>
</span><span class='line'><span class="k">if</span> <span class="o">[</span> -z <span class="s2">&quot;$1&quot;</span> <span class="o">]</span>
</span><span class='line'><span class="k">then</span>
</span><span class='line'>  <span class="c"># directory name must be specified</span>
</span><span class='line'>  <span class="nb">echo</span> <span class="s2">&quot;Please specify an installation folder name&quot;</span>
</span><span class='line'><span class="k">else</span>
</span><span class='line'>  <span class="c"># ideally you shouldn&#39;t have to change anything past this point</span>
</span><span class='line'>  <span class="nb">echo</span> <span class="s2">&quot;Creating a WordPress instance in $rootDIR/$1&quot;</span>
</span><span class='line'>  <span class="c"># create the directory to install WordPress in</span>
</span><span class='line'>  mkdir <span class="nv">$rootDIR</span>/<span class="nv">$1</span>
</span><span class='line'>  <span class="c"># download the latest version of WordPress into the directory we just created</span>
</span><span class='line'>  wget -o /dev/null -O <span class="nv">$rootDIR</span>/<span class="nv">$1</span>/wordpress.zip http://wordpress.org/latest.zip
</span><span class='line'>  <span class="c"># unzip the archive containing WordPress. files will be inside a &#39;wordpress&#39; directory</span>
</span><span class='line'>  unzip -q <span class="nv">$rootDIR</span>/<span class="nv">$1</span>/wordpress.zip -d <span class="nv">$rootDIR</span>/<span class="nv">$1</span>
</span><span class='line'>  <span class="c"># move the files out of the &#39;wordpress&#39; directory into their intended location</span>
</span><span class='line'>  mv <span class="nv">$rootDIR</span>/<span class="nv">$1</span>/wordpress/* <span class="nv">$rootDIR</span>/<span class="nv">$1</span>
</span><span class='line'>  <span class="c"># remove the wordpress archive and the wordpress folder</span>
</span><span class='line'>  rm <span class="nv">$rootDIR</span>/<span class="nv">$1</span>/wordpress.zip
</span><span class='line'>  rmdir <span class="nv">$rootDIR</span>/<span class="nv">$1</span>/wordpress
</span><span class='line'>  <span class="c"># make WordPress directory writeable by PHP so installation can take place</span>
</span><span class='line'>  chmod -R 777 <span class="nv">$rootDIR</span>/<span class="nv">$1</span>
</span><span class='line'>  <span class="c"># request the configuration file generation and blog installation webpages.</span>
</span><span class='line'>  <span class="nv">postdata</span><span class="o">=</span><span class="s2">&quot;dbname=$dbname&amp;uname=$dbuser&amp;pwd=$dbpass&amp;dbhost=$dbhost&amp;prefix=$1_&quot;</span>
</span><span class='line'>  wget -o /dev/null --post-data <span class="s2">&quot;$postdata&quot;</span> <span class="s2">&quot;$rootURL/$1/wp-admin/setup-config.php?step=2&quot;</span>
</span><span class='line'>  <span class="nv">postdata</span><span class="o">=</span><span class="s2">&quot;weblog_title=$blogtitle&amp;admin_email=$adminemail&quot;</span>
</span><span class='line'>  wget -o /dev/null --post-data <span class="s2">&quot;$postdata&quot;</span> <span class="s2">&quot;$rootURL/$1/wp-admin/install.php?step=2&quot;</span>
</span><span class='line'>  <span class="c"># WordPress password was randomly generated</span>
</span><span class='line'>  <span class="c"># change it to password in configuration and remove password change nag</span>
</span><span class='line'>  <span class="nv">sqlcommand</span><span class="o">=</span><span class="s2">&quot;UPDATE $1_users SET user_pass=MD5(&#39;$wppass&#39;)&quot;</span>
</span><span class='line'>  <span class="nv">sqlcommand</span><span class="o">=</span><span class="s2">&quot;$sqlcommand;DELETE FROM $1_usermeta WHERE meta_key=&#39;default_password_nag&#39;;&quot;</span>
</span><span class='line'>  mysql -u <span class="nv">$dbuser</span> -p<span class="nv">$dbpass</span> -e <span class="s2">&quot;$sqlcommand&quot;</span> <span class="nv">$dbname</span>
</span><span class='line'>  <span class="c"># uncomment the following line if you&#39;re running this script on a public server</span>
</span><span class='line'>  <span class="c">#chmod -R 755 $rootDIR/$1</span>
</span><span class='line'>  <span class="nb">echo</span> <span class="s2">&quot;Done&quot;</span>
</span><span class='line'><span class="k">fi</span>
</span></code></pre></td></tr></table></div></figure>


<p>If you think this might be useful, give it a shot and let me know what you think.</p>

		
		
	</div>


<div class="meta">
	<div class="date">








  


<time datetime="2010-03-12T21:08:59-08:00" pubdate data-updated="true">Mar 12<span>th</span>, 2010</time></div>
	<div class="tags">


	<a class='category' href='/blog/categories/wordpress/'>WordPress</a>


</div>
	
</div>
</article>


    <article class="post">
	<h2 class="title">
		
		<a href="/blog/2009/05/21/multiple-wordpress-blogs-on-one-wordpress-core/">
		
			Multiple WordPress Blogs on One WordPress Core</a>
	</h2>
	<div class="entry-content">
		<p>Last Saturday I had the opportunity to listen to <a href="http://www.krotscheck.net/">Mike Krotscheck</a> talk about techniques for advanced WordPress installations. One of the most interesting things I took away from his talk was a way to install multiple WordPress blogs on one WordPress core. Note we&rsquo;re not talking about WordPress MU. When you only need 2 or 3 blogs, WordPress MU can be a bit overkill, but installing these blogs on the same WordPress core can save space and make updates easier. Here&rsquo;s how you do it.</p>

<p>First of course you need to download WordPress and then upload it to your server. This is the easy part, and there are lots of instructions for how to do this, so I won&rsquo;t go through them. You&rsquo;ll also need a MySQL database, but again I won&rsquo;t go into that since there are lots of resources already available that explain how to do this.</p>

<p>Let&rsquo;s suppose we&rsquo;re installing two blogs on domain1.com and domain2.com (lame I know, but give me a break). These should be pointing at the same server (your domain registrar can help you with this). If you navigate to your WordPress install, you&rsquo;ll be asked to go through the installation process. Let&rsquo;s start with domain1.com. Enter all your database information, but specify a custom table prefix (like &ldquo;domain1_&rdquo;) which will be unique to that domain. Once the installation is complete (make sure you save your password!) you need to delete the wp-config.php file.</p>

<p>Now if you navigate with your other domain, you&rsquo;ll be asked to install WordPress again. This time, use a different table prefix (like &ldquo;domain2_&rdquo;). This will give you two different sets of WordPress tables in your database. The only problem is that you can&rsquo;t access both of them. We&rsquo;ll remedy this next.</p>

<p>Go into your wp-config.php file and find the line that looks something like this.</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='php'><span class='line'><span class="nv">$table_prefix</span>  <span class="o">=</span> <span class="s1">&#39;domain2_&#39;</span><span class="p">;</span>
</span></code></pre></td></tr></table></div></figure>


<p>We need this variable to be different, depending on what domain is being used to access your blog. Using the PHP $_SERVER super global, we can do this quite easily.</p>

<p>Here&rsquo;s the new code you&rsquo;d want to use.</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
</pre></td><td class='code'><pre><code class='php'><span class='line'><span class="k">if</span> <span class="p">(</span> <span class="s1">&#39;domain1.com&#39;</span> <span class="o">==</span> <span class="nv">$_SERVER</span><span class="p">[</span><span class="s1">&#39;HTTP_HOST&#39;</span><span class="p">]</span> <span class="p">)</span>  <span class="p">{</span>
</span><span class='line'><span class="nv">$table_prefix</span> <span class="o">=</span> <span class="s1">&#39;domain1_&#39;</span><span class="p">;</span>
</span><span class='line'><span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
</span><span class='line'><span class="nv">$table_prefix</span> <span class="o">=</span> <span class="s1">&#39;domain2_&#39;</span><span class="p">;</span>
</span><span class='line'><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>


<p>So now your server will display two different blogs, depending on what domain is used to access your site. Again, the advantage here is that you only use the space of one set of WordPress files, and you only have to do one update when a new version is released.</p>

<p>Mike talked about some other cool things you can do with this, and talked about how you can address issues with plugins like Google SiteMaps. He promised to post his slides, so if you&rsquo;d like to learn more you should check out <a href="http://www.krotscheck.net/">his blog</a>.</p>

		
		
	</div>


<div class="meta">
	<div class="date">








  


<time datetime="2009-05-21T22:14:53-07:00" pubdate data-updated="true">May 21<span>st</span>, 2009</time></div>
	<div class="tags">


	<a class='category' href='/blog/categories/wordpress/'>WordPress</a>


</div>
	
</div>
</article>


    <article class="post">
	<h2 class="title">
		
		<a href="/blog/2009/05/04/the-obscure-wordpress-get-option-parameter/">
		
			The Obscure WordPress Get_option Parameter</a>
	</h2>
	<div class="entry-content">
		<p>Any WordPress Plugin developer worth their salt knows about the <code>get_option</code> function, which allows options to be retrieved from the database. What I recently discovered is that this function accepts a second parameter, indicating a default value to be returned if the option doesn&rsquo;t exist in the database.</p>

<p>Here&rsquo;s a simple example of the &ldquo;old&rdquo; and &ldquo;new&rdquo; ways of retrieving options from the database:</p>

<p>old:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
</pre></td><td class='code'><pre><code class='php'><span class='line'><span class="nv">$option</span> <span class="o">=</span> <span class="nx">get_option</span><span class="p">(</span> <span class="s1">&#39;Option Name&#39;</span> <span class="p">);</span>
</span><span class='line'><span class="k">if</span><span class="p">(</span> <span class="k">false</span> <span class="o">===</span> <span class="nv">$option</span> <span class="p">)</span> <span class="p">{</span>
</span><span class='line'><span class="nv">$option</span> <span class="o">=</span> <span class="s1">&#39;My real option value.&#39;</span><span class="p">;</span>
</span><span class='line'><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>


<p>new:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='php'><span class='line'><span class="nv">$option</span> <span class="o">=</span> <span class="nx">get_option</span><span class="p">(</span><span class="s1">&#39;option_name&#39;</span><span class="p">,</span> <span class="s1">&#39;default&#39;</span><span class="p">);</span>
</span></code></pre></td></tr></table></div></figure>


<p>As you can see, this simplifies option retrieval and makes your code just a little easier to read.</p>

<p><strong>EDIT:</strong> Thanks <a href="http://nickohrn.com/">Nick Ohrn</a> for pointing out a bug in the first code snippet. I&rsquo;ve updated it so nobody is confused.</p>

		
		
	</div>


<div class="meta">
	<div class="date">








  


<time datetime="2009-05-04T22:18:54-07:00" pubdate data-updated="true">May 4<span>th</span>, 2009</time></div>
	<div class="tags">


	<a class='category' href='/blog/categories/wordpress/'>WordPress</a>


</div>
	
</div>
</article>


    <article class="post">
	<h2 class="title">
		
		<a href="/blog/2009/03/17/limit-your-wordpress-rss-feed-to-one-category/">
		
			Limit Your WordPress RSS Feed to One Category</a>
	</h2>
	<div class="entry-content">
		<p>When designing a recent website, I decided to use Posts for both news items and Portfolio entries. There were several advantages to doing this, but one issue I found was that everything was being thrown together in the RSS feed. I decided to look into filtering the RSS feed to only show posts from the News category. Here&rsquo;s how it works.</p>

<p>As with just about anything in WordPress, you can use Actions and Filters to customize the way WordPress RSS Feeds. I chose to filter the query because it already has built in category filtering functionality. First I hooked into the query filter.</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='php'><span class='line'><span class="nx">add_filter</span><span class="p">(</span><span class="s1">&#39;pre_get_posts&#39;</span><span class="p">,</span> <span class="s1">&#39;filterRSSQuery&#39;</span><span class="p">);</span>
</span></code></pre></td></tr></table></div></figure>


<p>Then I created a function called &lsquo;filterRSSQuery&rsquo; which does just what the name suggests.</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
</pre></td><td class='code'><pre><code class='php'><span class='line'><span class="k">function</span> <span class="nf">filterRSSQuery</span><span class="p">(</span><span class="nv">$query</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>  <span class="k">if</span> <span class="p">(</span> <span class="nv">$query</span><span class="o">-&gt;</span><span class="na">is_feed</span> <span class="p">)</span> <span class="p">{</span>
</span><span class='line'>      <span class="nv">$query</span><span class="o">-&gt;</span><span class="na">set</span><span class="p">(</span><span class="s1">&#39;category_name&#39;</span><span class="p">,</span> <span class="s1">&#39;News&#39;</span><span class="p">);</span>
</span><span class='line'>  <span class="p">}</span>
</span><span class='line'>  <span class="k">return</span> <span class="nv">$query</span><span class="p">;</span>
</span><span class='line'><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>


<p>The code is pretty straight foreward, but here&rsquo;s a breakdown. First we test to see if the query is for a feed (we don&rsquo;t want to do this filtering anywhere else). Then we set the &lsquo;category_name&rsquo; argument to &lsquo;News&rsquo; (you would change this to whatever category you want to show up). Finally, you return the modified query object.</p>

<p>Overall, this is pretty simple, but extremely powerful.</p>

		
		
	</div>


<div class="meta">
	<div class="date">








  


<time datetime="2009-03-17T22:23:38-07:00" pubdate data-updated="true">Mar 17<span>th</span>, 2009</time></div>
	<div class="tags">


	<a class='category' href='/blog/categories/wordpress/'>WordPress</a>


</div>
	
</div>
</article>


    <article class="post">
	<h2 class="title">
		
		<a href="/blog/2009/02/26/using-jquery-and-gmails-plus-addressing-to-fight-email-spam/">
		
			Using jQuery and Gmail&#8217;s Plus-Addressing to Fight Email Spam</a>
	</h2>
	<div class="entry-content">
		<p>Many people fight spam bots by obfuscating their emails (for example &ldquo;joe [at] example [dot] com&rdquo; or &ldquo;joe@{REMOVETHIS}example.com&rdquo;). This does an OK job, but it&rsquo;s also a royal pain for the visitor, who has to type in, or fix your email address if they want to send you an email. The ultimate spam fighting question arises: &ldquo;How do you keep bots out while letting real users in&rdquo;. GMail&rsquo;s plus-addressing feature and jQuery might be able to bring us one step closer to an answer.</p>

<p>If you use Google&rsquo;s email services (GMail or Google Apps), you have a powerful email feature available. Plus-addressing means that bill&#64;gmail.com, bill+something&#64;gmail.com and bill+anything&#64;gmail.com all point to the same email address. When deciding what address to deliver the message to, Google drops everything after the plus sign. you can then actually use filters to move items to folders inside your mailbox (for example, you could use example+bank&#64;gmail.com for your banking). Doing this also makes it just a little harder (though not impossible) for bots to get your real email address.</p>

<p>By default, you probably don&rsquo;t want to display a &ldquo;plus address&rdquo; on a contact page, jQuery comes to our rescue here, allowing us to remove the &ldquo;plus&rdquo; part for users with JavaScript support. The following script looks for all email links and removes the &ldquo;plus&rdquo; portion from the href and the inner text.</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
</pre></td><td class='code'><pre><code class='javascript'><span class='line'><span class="nx">jQuery</span><span class="p">(</span><span class="nb">document</span><span class="p">).</span><span class="nx">ready</span><span class="p">(</span><span class="kd">function</span><span class="p">(){</span>
</span><span class='line'>  <span class="nx">jQuery</span><span class="p">(</span><span class="s1">&#39;a[href^=mailto:]&#39;</span><span class="p">).</span><span class="nx">each</span><span class="p">(</span><span class="nx">removeSpamProtection</span><span class="p">);</span>
</span><span class='line'><span class="p">});</span>
</span><span class='line'>
</span><span class='line'><span class="kd">function</span> <span class="nx">removeSpamProtection</span><span class="p">(</span><span class="nx">index</span><span class="p">,</span> <span class="nx">element</span><span class="p">){</span>
</span><span class='line'>  <span class="kd">var</span> <span class="nx">link</span> <span class="o">=</span> <span class="nx">jQuery</span><span class="p">(</span><span class="nx">element</span><span class="p">);</span>
</span><span class='line'>  <span class="nx">link</span><span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s1">&#39;href&#39;</span><span class="p">,</span> <span class="nx">link</span><span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s1">&#39;href&#39;</span><span class="p">).</span><span class="nx">replace</span><span class="p">(</span><span class="sr">/\+[a-zA-Z]*/</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">))</span>
</span><span class='line'>      <span class="p">.</span><span class="nx">text</span><span class="p">(</span><span class="nx">link</span><span class="p">.</span><span class="nx">text</span><span class="p">().</span><span class="nx">replace</span><span class="p">(</span><span class="sr">/\+[a-zA-Z]*/</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">));</span>
</span><span class='line'><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>


<p>Now all visitors with JavaScript support will see something like:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='html'><span class='line'><span class="nt">&lt;a</span> <span class="na">href=</span><span class="s">&quot;mailto:example@example.com&quot;</span><span class="nt">&gt;</span>example@example.com<span class="nt">&lt;/a&gt;</span>
</span></code></pre></td></tr></table></div></figure>


<p>Visitors without JavaScript support will see:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='html'><span class='line'><span class="nt">&lt;a</span> <span class="na">href=</span><span class="s">&quot;mailto:example+spamblock@example.com&quot;</span><span class="nt">&gt;</span>example+spamblock@example.com<span class="nt">&lt;/a&gt;</span>
</span></code></pre></td></tr></table></div></figure>


<p>Normal visitors will see your real email address while bots and visitors without JavaScript will see something else. The bots will (hopefully) be confused by the plus sign. If not, they will be sending an email to an address that you can easily filter into a &ldquo;maybe spam&rdquo; folder.</p>

<p>So there you have it. A very short piece of JavaScript (thanks to the wonders of jQuery) that you can include in your WordPress theme or install as a separate plugin.</p>

<p>What do you do to protect your email online? Do you have another method that works better? If so, please share it in the comments!</p>

		
		
	</div>


<div class="meta">
	<div class="date">








  


<time datetime="2009-02-26T21:26:55-08:00" pubdate data-updated="true">Feb 26<span>th</span>, 2009</time></div>
	<div class="tags">


	<a class='category' href='/blog/categories/gmail/'>Gmail</a>, <a class='category' href='/blog/categories/jquery/'>jQuery</a>


</div>
	
</div>
</article>


    <article class="post">
	<h2 class="title">
		
		<a href="/blog/2009/01/14/converting-php-associative-arrays-to-variables/">
		
			Converting PHP Associative Arrays to Variables</a>
	</h2>
	<div class="entry-content">
		<p><strong>EDIT: <a href="http://nickohrn.com/">Nick Ohrn</a> pointed out that <a href="http://us.php.net/extract" title="PHP Manual Entry for extract">extract</a> does this automatically. The following post is still a valid look at how this could be implemented if the functionality didn&rsquo;t already exist, but it is better to use extract because it is likely more efficient.</strong></p>

<p>Associative arrays are one of my favorite PHP features. They&rsquo;re simple to use and easy to understand. Sometimes though, being able to reference the values of associative arrays with variables can be more convenient. Today I&rsquo;m going to share a simple way to convert a associative arrays to variables.</p>

<p>OK, if you&rsquo;re not sure what we&rsquo;re trying to accomplish here, take a look at the following example.</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='php'><span class='line'><span class="nv">$list</span> <span class="o">=</span> <span class="k">array</span><span class="p">(</span> <span class="s1">&#39;var1&#39;</span> <span class="o">=&amp;</span><span class="nx">gt</span><span class="p">;</span> <span class="s1">&#39;value1&#39;</span><span class="p">,</span> <span class="s1">&#39;var2&#39;</span> <span class="o">=&amp;</span><span class="nx">gt</span><span class="p">;</span> <span class="s1">&#39;value2&#39;</span> <span class="p">);</span>
</span></code></pre></td></tr></table></div></figure>


<p>To reference the elements in the array, you&rsquo;ll have to use the array key like this.</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class='php'><span class='line'><span class="k">echo</span> <span class="nv">$list</span><span class="p">[</span><span class="s1">&#39;var1&#39;</span><span class="p">];</span> <span class="c1">//prints &#39;value1&#39;</span>
</span><span class='line'><span class="k">echo</span> <span class="nv">$list</span><span class="p">[</span><span class="s1">&#39;var2&#39;</span><span class="p">];</span> <span class="c1">//prints &#39;value2&#39;</span>
</span></code></pre></td></tr></table></div></figure>


<p>What we&rsquo;d like to do instead is reference the values using variable names like this.</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class='php'><span class='line'><span class="k">echo</span> <span class="nv">$var1</span><span class="p">;</span> <span class="c1">//print &#39;value1&#39;</span>
</span><span class='line'><span class="k">echo</span> <span class="nv">$var2</span><span class="p">;</span> <span class="c1">//print &#39;value2&#39;</span>
</span></code></pre></td></tr></table></div></figure>


<p>This is possible through what the PHP Manual calls &lsquo;variable variables&rsquo;. The idea is that the value of one variable is used as the name of another variable. Here&rsquo;s an example.</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class='php'><span class='line'><span class="nv">$hello</span> <span class="o">=</span> <span class="s1">&#39;world&#39;</span><span class="p">;</span>
</span><span class='line'><span class="nv">$$hello</span> <span class="o">=</span> <span class="s1">&#39;howdy&#39;</span><span class="p">;</span>
</span><span class='line'><span class="k">echo</span> <span class="nv">$world</span><span class="p">;</span> <span class="c1">//prints &#39;howdy&#39;</span>
</span></code></pre></td></tr></table></div></figure>


<p>Here, the value of <code>$hello</code> is analyzed and used as the name of the variable to which <code>'howdy'</code> is assigned.</p>

<p>Now it&rsquo;s not a big step to expand this to an associative array. Consider the following code.</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
</pre></td><td class='code'><pre><code class='php'><span class='line'><span class="nv">$list</span> <span class="o">=</span> <span class="k">array</span><span class="p">(</span> <span class="s1">&#39;var1&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;value1&#39;</span><span class="p">,</span> <span class="s1">&#39;var2&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;value2&#39;</span> <span class="p">);</span>
</span><span class='line'><span class="k">foreach</span> <span class="p">(</span> <span class="nv">$list</span> <span class="k">as</span> <span class="nv">$key</span> <span class="o">=&gt;</span> <span class="nv">$value</span> <span class="p">)</span> <span class="p">{</span> <span class="nv">$$key</span> <span class="o">=</span> <span class="nv">$value</span><span class="p">;</span> <span class="p">}</span>
</span><span class='line'><span class="k">echo</span> <span class="nv">$var1</span><span class="p">;</span> <span class="c1">//prints &#39;value1&#39;</span>
</span><span class='line'><span class="k">echo</span> <span class="nv">$var2</span><span class="p">;</span> <span class="c1">//prints &#39;value2&#39;</span>
</span></code></pre></td></tr></table></div></figure>


<p>So we&rsquo;ve accomplished what we set out to do. I must caution you, though, about a couple of things which might trip you up.</p>

<p>First, make sure the keys are valid variable names. If you don&rsquo;t you&rsquo;ll run into problems when you execute the script.</p>

<p>Second, be <em>very</em> careful when using this with user input. For example, the following code is insecure.</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
</pre></td><td class='code'><pre><code class='php'><span class='line'><span class="c1">// login.php</span>
</span><span class='line'><span class="c1">// checks the username and password in the GET request</span>
</span><span class='line'><span class="nv">$realuser</span> <span class="o">=</span> <span class="s1">&#39;me&#39;</span><span class="p">;</span>
</span><span class='line'><span class="nv">$realpass</span> <span class="o">=</span> <span class="s1">&#39;secret&#39;</span><span class="p">;</span>
</span><span class='line'><span class="k">foreach</span> <span class="p">(</span> <span class="nv">$_GET</span> <span class="k">as</span> <span class="nv">$key</span> <span class="o">=&gt;</span> <span class="nv">$value</span> <span class="p">)</span> <span class="p">{</span> <span class="nv">$$key</span> <span class="o">=</span> <span class="nv">$value</span><span class="p">;</span> <span class="p">}</span>
</span><span class='line'><span class="k">if</span> <span class="p">(</span> <span class="nv">$user</span> <span class="o">==</span> <span class="nv">$realuser</span> <span class="o">&amp;&amp;</span> <span class="nv">$pass</span> <span class="o">==</span> <span class="nv">$realpass</span> <span class="p">)</span> <span class="p">{</span>
</span><span class='line'> <span class="k">echo</span> <span class="s1">&#39;login correct&#39;</span><span class="p">;</span>
</span><span class='line'><span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
</span><span class='line'> <span class="k">echo</span> <span class="s1">&#39;login incorrect&#39;</span><span class="p">;</span>
</span><span class='line'><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>


<p>There are several problems here. First, we don&rsquo;t <em>know</em> that $user and $pass have been initialized. We should check this before using them. Second (and more importantly) a cleverly generated request could let a user log in without a correct username/password. For example: <code>login.php?user=me&amp;pass=wrong&amp;realpass=wrong</code></p>

<p>When the script runs through the list of variables, it will assign a new value of <code>wrong</code> to $realpass. Because <code>$realpass</code> and <code>$pass</code> have the same value (as do <code>$user</code> and <code>$realuser</code>), the page will allow them to log in.</p>

<p>Here is a way to keep things a little safer by prefixing all the <code>$_GET[]</code> values.</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
</pre></td><td class='code'><pre><code class='php'><span class='line'><span class="c1">// login.php</span>
</span><span class='line'><span class="c1">// checks the username and password in GET request</span>
</span><span class='line'><span class="nv">$realuser</span> <span class="o">=</span> <span class="s1">&#39;me&#39;</span><span class="p">;</span>
</span><span class='line'><span class="nv">$realpass</span> <span class="o">=</span> <span class="s1">&#39;secret&#39;</span><span class="p">;</span>
</span><span class='line'><span class="k">foreach</span> <span class="p">(</span> <span class="nv">$_GET</span> <span class="k">as</span> <span class="nv">$key</span> <span class="o">=&gt;</span> <span class="nv">$value</span> <span class="p">)</span> <span class="p">{</span> <span class="err">$</span><span class="p">{</span><span class="s1">&#39;get_&#39;</span><span class="p">;</span> <span class="o">.</span> <span class="nv">$key</span><span class="p">}</span> <span class="o">=</span> <span class="nv">$value</span><span class="p">;</span> <span class="p">}</span>
</span><span class='line'><span class="k">if</span> <span class="p">(</span> <span class="nb">isset</span><span class="p">(</span> <span class="nv">$get_user</span> <span class="p">)</span> <span class="o">&amp;&amp;</span> <span class="nb">isset</span><span class="p">(</span> <span class="nv">$get_pass</span> <span class="p">)</span>
</span><span class='line'>    <span class="o">&amp;&amp;</span> <span class="nv">$get_user</span> <span class="o">==</span> <span class="nv">$realuser</span> <span class="o">&amp;&amp;</span> <span class="nv">$get_pass</span> <span class="o">==</span> <span class="nv">$realpass</span> <span class="p">)</span> <span class="p">{</span>
</span><span class='line'> <span class="k">echo</span> <span class="s1">&#39;login correct&#39;</span><span class="p">;</span>
</span><span class='line'><span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
</span><span class='line'> <span class="k">echo</span> <span class="s1">&#39;login incorrect&#39;</span><span class="p">;</span>
</span><span class='line'><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>


<p>Now the <code>$_GET[]</code> values are prefixed with <code>get_</code> so they can&rsquo;t interfere with other variables in the script. Additionally <code>isset</code> is used to ensure that the values of the variables has actually been set.</p>

<p>To use something like this, you&rsquo;d still need to check for invalid variable names, but I won&rsquo;t go into that for this example.</p>

		
		
	</div>


<div class="meta">
	<div class="date">








  


<time datetime="2009-01-14T21:39:35-08:00" pubdate data-updated="true">Jan 14<span>th</span>, 2009</time></div>
	<div class="tags">


	<a class='category' href='/blog/categories/php/'>PHP</a>


</div>
	
</div>
</article>


    <article class="post">
	<h2 class="title">
		
		<a href="/blog/2009/01/14/wamp-alias-directories/">
		
			Wamp Alias Directories</a>
	</h2>
	<div class="entry-content">
		<p>I use <a href="http://www.wampserver.com/">Wamp Server</a> together with <a href="http://www.jetbrains.com/phpstorm/">PhpStorm</a> to develop PHP applications on my local machine.
This works well because I can do debugging (thanks to <a href="http://www.xdebug.org/">xdebug</a>) and can readily view and edit files.
I usually don&rsquo;t like to place projects in the <code>c:\wamp\www</code> folder, preferring instead to place them in more logical places in my personal directory.
Wamp alias directories are a great way to improve project organization.</p>

<p>The easiest way to facilitate this is to create alias directories in Apache that point to these different locations. Wamp Server provides an interface for creating wamp alias directories for Apache.</p>

<h2>Adding Wamp Alias Directories</h2>

<p>Click on the tray icon and select Apache &rarr; Alias directories &rarr;  Add an alias. A new command prompt window opens where you can enter the alias information.</p>

<p>Creating an alias like this, you&rsquo;ll probably notice that in order for the URL to work, you have to have a trailing slash at the end (e.g. <code>http://localhost/example/</code> will work while <code>http://localhost/example</code> won&rsquo;t). This can be a bit of a pain, but there is fortunately a quick fix.</p>

<h2>Fixing Your Wamp Alias Directories</h2>

<p>Click on the Wamp Server tray icon again and select Apache &rarr; Alias directories &rarr; [alias url] &ndash;> Edit alias. This will open the alias file in Notepad. Remove the trailing slash from the relative URL.</p>

<p>For Example</p>

<p><code>Alias /example/ "c:/path/to/example/"</code></p>

<p>Would become</p>

<p><code>Alias /example "c:/path/to/example/"</code></p>

<p>Save the file and close Notepad. Wamp Server should restart automatically (if not, you can restart it manually from the tray icon). Once it has restarted, you&rsquo;re alias should now work with or without the trailing slash. Why Wamp Server doesn&rsquo;t do this automatically, I&rsquo;m not sure, but at least there&rsquo;s a simple fix.</p>

<h2>Updating Wamp so Alias Directories Just Work</h2>

<p>Thanks to Ozan Hazer for pointing out that you can actually change the alias template, and save yourself from having to perform multiple steps every time you add an alias.</p>

<p>Open <code>c:\wamp\scripts\addAlias.php</code> and locate the line starting with <code>$newConfFileContents =</code>.</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
</pre></td><td class='code'><pre><code class=''><span class='line'># Find:
</span><span class='line'>$newConfFileContents = 'Alias /'.$newAliasDir.'/
</span><span class='line'>
</span><span class='line'># Replace it with:
</span><span class='line'>$newConfFileContents = 'Alias /'.$newAliasDir.'</span></code></pre></td></tr></table></div></figure>


<p>Open <code>c:\wamp\scripts\refresh.php</code>.</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
</pre></td><td class='code'><pre><code class=''><span class='line'># Find:
</span><span class='line'>preg_match('|^Alias /'.$newalias_dir.'/ "(.+)"|',$alias_contents,$match);
</span><span class='line'>
</span><span class='line'># Replace it with:
</span><span class='line'>preg_match('|^Alias /'.$newalias_dir.'/ "(.+)"|',$alias_contents,$match);</span></code></pre></td></tr></table></div></figure>


<p>Be sure to back up these files before you edit them, since breaking them could potentially break other Wamp functionality.</p>

		
		
	</div>


<div class="meta">
	<div class="date">








  


<time datetime="2009-01-14T12:45:43-08:00" pubdate data-updated="true">Jan 14<span>th</span>, 2009</time></div>
	<div class="tags">


	<a class='category' href='/blog/categories/apache/'>Apache</a>, <a class='category' href='/blog/categories/wamp/'>Wamp</a>


</div>
	
</div>
</article>


    <article class="post">
	<h2 class="title">
		
		<a href="/blog/2008/12/30/wordpress-security-tip-disable-folder-indexes/">
		
			WordPress Security Tip: Disable Folder Indexes</a>
	</h2>
	<div class="entry-content">
		<p>I&rsquo;ve been catching up on the WordPress Weekly Podcasts lately and while I was listening to one of the first shows I came across a nice security tip. Place empty index.php files in all directories that don&rsquo;t already have an index file. Directories like the /wp-content/plugins folder could be dangerous in the hands of hackers if one of the plugins you use has a security flaw. By obscuring the folder&rsquo;s contents you make it just a little harder for hackers to cause you problems.</p>

<p>I went about creating these empty index files on my site, but soon discovered that there are hosts of folders that could use them (think about the date structure in /wp-content/uploads ). Then I remembered another tool. <code>.htaccess</code>. Add this line of code to your <code>.htaccess</code> file to keep file in <em>any</em> directory from being listed (this works on any site who&rsquo;s server supports <code>.htaccess</code> by the way, not just WordPress blogs).</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>IndexIgnore *</span></code></pre></td></tr></table></div></figure>


<p>Really simple, I know, but I thought I&rsquo;d share it all the same.</p>

		
		
	</div>


<div class="meta">
	<div class="date">








  


<time datetime="2008-12-30T21:49:40-08:00" pubdate data-updated="true">Dec 30<span>th</span>, 2008</time></div>
	<div class="tags">


	<a class='category' href='/blog/categories/apache/'>Apache</a>, <a class='category' href='/blog/categories/wordpress/'>WordPress</a>


</div>
	
</div>
</article>


    <article class="post">
	<h2 class="title">
		
		<a href="/blog/2008/12/23/wordpress-breadcrumb-navigation/">
		
			WordPress Breadcrumb Navigation</a>
	</h2>
	<div class="entry-content">
		<p><a href="http://en.wikipedia.org/wiki/Breadcrumb_(navigation)">Bread Crumbs</a> are something that&rsquo;s been around for quite some time.
I first remember seeing them in <a title="ANGEL Learning" href="http://angellearning.com/">ANGEL</a> when my dad was working for the company in 2005. Similar things can be found in File Browsers, and browser history is really a kind of bread crumb.</p>

<p>In my work for IRPA one of the concerns we&rsquo;ve had is making it easy to navigate the site. Because WordPress has limited CMS functionality out of the box, navigation is sometimes difficult on sites with many nested pages. One of the solutions I looked at was Breadcrumbs because they can give users a quick look at their location in the site structure. Over the break (which I&rsquo;m still enjoying) I&rsquo;ve been able to finish implementing breadcrumbs on the IRPA Site.</p>

<p>I almost think something like this should be in core, but again, WordPress isn&rsquo;t a CMS, so maybe it wouldn&rsquo;t be useful for most people.</p>

<p>One of the things that took me the longest was figuring out how to handle different site settings. A site who&rsquo;s home page displays latest posts needs a slightly different navigation list than a site which has a static home page. Even sites with static pages can have different structures depending on what page is the &ldquo;home&rdquo; page. Anyway, Here&rsquo;s the code if you want to add it to your template. Simply paste the code into your <code>functions.php</code> file and add a call to <code>get_breadcrumbs()</code> where you want the breadcrumb list in your template. It outputs the breadcrumbs as list items. You&rsquo;ll need to put the <code>ul</code> around them yourself in the template.</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
<span class='line-number'>31</span>
<span class='line-number'>32</span>
<span class='line-number'>33</span>
</pre></td><td class='code'><pre><code class='php'><span class='line'><span class="k">function</span> <span class="nf">get_breadcrumbs</span><span class="p">(){</span>
</span><span class='line'>  <span class="k">global</span> <span class="nv">$post</span><span class="p">;</span>
</span><span class='line'>
</span><span class='line'>  <span class="nv">$separator</span> <span class="o">=</span> <span class="s1">&#39;  &amp;gt; &#39;</span><span class="p">;</span> <span class="c1">// what to place between the pages</span>
</span><span class='line'>
</span><span class='line'>  <span class="k">if</span> <span class="p">(</span> <span class="nx">is_page</span><span class="p">()</span> <span class="p">){</span>
</span><span class='line'>      <span class="c1">// bread crumb structure only logical on pages</span>
</span><span class='line'>      <span class="nv">$trail</span> <span class="o">=</span> <span class="k">array</span><span class="p">(</span><span class="nv">$post</span><span class="p">);</span> <span class="c1">// initially $trail only contains the current page</span>
</span><span class='line'>      <span class="nv">$parent</span> <span class="o">=</span> <span class="nv">$post</span><span class="p">;</span> <span class="c1">// initially set to current post</span>
</span><span class='line'>      <span class="nv">$show_on_front</span> <span class="o">=</span> <span class="nx">get_option</span><span class="p">(</span> <span class="s1">&#39;show_on_front&#39;</span><span class="p">);</span> <span class="c1">// does the front page display the latest posts or a static page</span>
</span><span class='line'>      <span class="nv">$page_on_front</span> <span class="o">=</span> <span class="nx">get_option</span><span class="p">(</span> <span class="s1">&#39;page_on_front&#39;</span> <span class="p">);</span> <span class="c1">// if it shows a page, what page</span>
</span><span class='line'>      <span class="c1">// while the current page isn&#39;t the home page and it has a parent</span>
</span><span class='line'>      <span class="k">while</span> <span class="p">(</span> <span class="nv">$parent</span><span class="o">-&gt;</span><span class="na">post_parent</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="p">(</span><span class="nv">$parent</span><span class="o">-&gt;</span><span class="na">ID</span> <span class="o">==</span> <span class="nv">$page_on_front</span> <span class="o">&amp;&amp;</span> <span class="s1">&#39;page&#39;</span><span class="p">)</span> <span class="o">==</span> <span class="nv">$show_on_front</span> <span class="p">){</span>
</span><span class='line'>          <span class="nv">$parent</span> <span class="o">=</span> <span class="nx">get_post</span><span class="p">(</span> <span class="nv">$parent</span><span class="o">-&gt;</span><span class="na">post_parent</span> <span class="p">);</span> <span class="c1">// get the current page&#39;s parent</span>
</span><span class='line'>          <span class="nb">array_unshift</span><span class="p">(</span> <span class="nv">$trail</span><span class="p">,</span> <span class="nv">$parent</span> <span class="p">);</span> <span class="c1">// add the parent object to beginning of array</span>
</span><span class='line'>      <span class="p">}</span>
</span><span class='line'>      <span class="k">if</span> <span class="p">(</span> <span class="s1">&#39;posts&#39;</span> <span class="o">==</span> <span class="nv">$show_on_front</span> <span class="p">)</span> <span class="c1">// if the front page shows latest posts, simply display a home link</span>
</span><span class='line'>          <span class="k">echo</span> <span class="s2">&quot;&lt;li class=&#39;breadcrumb-item&#39; id=&#39;breadcrumb-0&#39;&gt;&lt;a href=&#39;&quot;</span> <span class="o">.</span> <span class="nx">get_bloginfo</span><span class="p">(</span><span class="s1">&#39;home&#39;</span><span class="p">)</span> <span class="o">.</span> <span class="s2">&quot;&#39;&gt;Home&lt;/a&gt;&lt;/li&gt;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">;</span> <span class="c1">// home page link</span>
</span><span class='line'>      <span class="k">else</span><span class="p">{</span> <span class="c1">// if the front page displays a static page, display a link to it</span>
</span><span class='line'>          <span class="nv">$home_page</span> <span class="o">=</span> <span class="nx">get_post</span><span class="p">(</span> <span class="nv">$page_on_front</span> <span class="p">);</span> <span class="c1">// get the front page object</span>
</span><span class='line'>          <span class="k">echo</span> <span class="s2">&quot;&lt;li class=&#39;breadcrumb-item&#39; id=&#39;breadcrumb-</span><span class="si">{</span><span class="nv">$home_page</span><span class="o">-&gt;</span><span class="na">ID</span><span class="si">}</span><span class="s2">&#39;&gt;&lt;a href=&#39;&quot;</span> <span class="o">.</span> <span class="nx">get_bloginfo</span><span class="p">(</span><span class="s1">&#39;home&#39;</span><span class="p">)</span> <span class="o">.</span> <span class="s2">&quot;&#39;&gt;</span><span class="si">$home_page-&gt;post_title</span><span class="s2">&lt;/a&gt;&lt;/li&gt;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">;</span> <span class="c1">// home page link</span>
</span><span class='line'>          <span class="k">if</span><span class="p">(</span><span class="nv">$trail</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">-&gt;</span><span class="na">ID</span> <span class="o">==</span> <span class="nv">$page_on_front</span><span class="p">)</span> <span class="c1">// if the home page is an ancestor of this page</span>
</span><span class='line'>              <span class="nb">array_shift</span><span class="p">(</span> <span class="nv">$trail</span> <span class="p">);</span> <span class="c1">// remove the home page from the $trail because we&#39;ve already printed it</span>
</span><span class='line'>      <span class="p">}</span>
</span><span class='line'>      <span class="k">foreach</span> <span class="p">(</span> <span class="nv">$trail</span> <span class="k">as</span> <span class="nv">$page</span><span class="p">){</span>
</span><span class='line'>          <span class="c1">// print the link to the current page in the foreach</span>
</span><span class='line'>          <span class="k">echo</span> <span class="s2">&quot;&lt;li class=&#39;breadcrumb-item&#39; id=&#39;breadcrumb-</span><span class="si">{</span><span class="nv">$page</span><span class="o">-&gt;</span><span class="na">ID</span><span class="si">}</span><span class="s2">&#39; &gt;</span><span class="si">$separator</span><span class="s2">&lt;a href=&#39;&quot;</span> <span class="o">.</span> <span class="nx">get_page_link</span><span class="p">(</span> <span class="nv">$page</span><span class="o">-&gt;</span><span class="na">ID</span> <span class="p">)</span> <span class="o">.</span> <span class="s2">&quot;&#39;&gt;</span><span class="si">{</span><span class="nv">$page</span><span class="o">-&gt;</span><span class="na">post_title</span><span class="si">}</span><span class="s2">&lt;/a&gt;&lt;/li&gt;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">;</span>
</span><span class='line'>      <span class="p">}</span>
</span><span class='line'>  <span class="p">}</span><span class="k">else</span><span class="p">{</span>
</span><span class='line'>      <span class="c1">// if what we&#39;re looking at isn&#39;t a page, simply display a home link</span>
</span><span class='line'>      <span class="k">echo</span> <span class="s2">&quot;&lt;li class=&#39;breadcrumb-item&#39; id=&#39;breadcrumb-0&#39;&gt;&lt;a href=&#39;&quot;</span> <span class="o">.</span> <span class="nx">get_bloginfo</span><span class="p">(</span><span class="s1">&#39;home&#39;</span><span class="p">)</span> <span class="o">.</span> <span class="s2">&quot;&#39;&gt;Home&lt;/a&gt;&lt;/li&gt;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">;</span> <span class="c1">// home page link</span>
</span><span class='line'>  <span class="p">}</span>
</span><span class='line'><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>


<p>If you have any corrections or suggestions for this (rather long) bit of code, please add your comment bellow. I love feedback!</p>

		
		
	</div>


<div class="meta">
	<div class="date">








  


<time datetime="2008-12-23T21:54:39-08:00" pubdate data-updated="true">Dec 23<span>rd</span>, 2008</time></div>
	<div class="tags">


	<a class='category' href='/blog/categories/wordpress/'>WordPress</a>


</div>
	
</div>
</article>

<nav id="pagenavi">
    
        <a href="/blog/page/6/" class="prev">Prev</a>
    
    
    <div class="center"><a href="/blog/archives">Blog Archives</a></div>
</nav></div>
	<footer id="footer" class="inner">Copyright &copy; 2015

    Will Anderson

</footer>
	<script src="/javascripts/slash.js"></script>





<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-6776456-2', 'willi.am');
  ga('send', 'pageview');

</script>
</body>
</html>