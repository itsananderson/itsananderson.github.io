
<!DOCTYPE HTML>
<html>
<head>
	<meta charset="utf-8">
	<title>Will Anderson</title>
	<meta name="author" content="Will Anderson">

	
	<meta name="description" content="I&rsquo;ve been playing with the new &ldquo;Docker for Windows&rdquo; tool recently, and I wanted to share a slightly obscure issue I ran across. &hellip;">
	
	<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">

	<link href="http://william-backend.azurewebsites.net/feed/" rel="alternate" title="Will Anderson" type="application/atom+xml">
	<link rel="canonical" href="">
	<link href="/favicon.ico" rel="shortcut icon">
	<link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
	<!--[if lt IE 9]><script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script><![endif]-->
	<script src="//code.jquery.com/jquery-1.11.0.min.js"></script>
	
</head>

<body>
	<header id="header" class="inner"><h1><a href="/">Will Anderson</a></h1>
<nav id="main-nav"><ul class="main">
	<li><a href="/work-with-me">Work With Me</a></li>
	<li><a href="/blog/archives">Archives</a></li>
</ul>
</nav>
<nav id="mobile-nav">
	<div class="alignleft menu">
		<a class="button">Menu</a>
		<div class="container"><ul class="main">
	<li><a href="/work-with-me">Work With Me</a></li>
	<li><a href="/blog/archives">Archives</a></li>
</ul>
</div>
	</div>
	<div class="alignright search">
		<a class="button"></a>
		<div class="container">
			<form action="https://www.google.com/search" method="get">
				<input type="text" name="q" results="0">
				<input type="hidden" name="q" value="site:willi.am">
			</form>
		</div>
	</div>
</nav>
<nav id="sub-nav" class="alignright">
	<div class="social">
		
		
		
		<a class="twitter" href="http://twitter.com/itsananderson" title="Twitter">Twitter</a>
		
		
		<a class="github" href="https://github.com/itsananderson" title="GitHub">GitHub</a>
		
    
		
		
		
		
		
		<a class="rss" href="http://william-backend.azurewebsites.net/feed/" title="RSS">RSS</a>
		
    
	</div>
	<form class="search" action="https://www.google.com/search" method="get">
		<input class="alignright" type="text" name="q" results="0">
		<input type="hidden" name="q" value="site:willi.am">
	</form>
</nav>

</header>
	
		
	
	<div id="content" class="inner">


    <article class="post">
	<h2 class="title">
		
		<a href="/blog/2016/07/30/docker-for-windows-sharing-host-volumes/">
		
			Docker for Windows: Sharing Host Volumes</a>
	</h2>
	<div class="entry-content">
		<p>I&rsquo;ve been playing with the new &ldquo;Docker for Windows&rdquo; tool recently, and I wanted to share a slightly obscure issue I ran across.</p>

<p>Docker lets you share volumes between your containers and your host machine. This is handy during development time, when you want to be able to quickly iterate without having to continually rebuild your container.</p>

<h3>The Suspicious Empty Directory</h3>

<p>When I first tried sharing a volume, I typed this into PowerShell:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>&gt; dir c:\docker
</span><span class='line'>
</span><span class='line'>
</span><span class='line'>    Directory: C:\docker
</span><span class='line'>
</span><span class='line'>
</span><span class='line'>Mode                LastWriteTime         Length Name
</span><span class='line'>----                -------------         ------ ----
</span><span class='line'>-a----        7/30/2016   9:47 PM              8 test.txt
</span><span class='line'>
</span><span class='line'>&gt; docker run -it -v c:/docker:/host ubuntu bash
</span><span class='line'>root@333a10babe3a:/# ls /host
</span><span class='line'>root@333a10babe3a:/#</span></code></pre></td></tr></table></div></figure>


<p>Hmm&hellip; As you can see, the <code>c:\docker</code> folder has a test file, but it doesn&rsquo;t show up in the Docker container.
After some head scratching, I figured out the missing piece: Out of the box, Docker isn&rsquo;t configured with permissions to share your drives with your containers.</p>

<h3>Giving Docker Access</h3>

<p>To give Docker access to your computer&rsquo;s drives, right click on the Docker icon in your taskbar, then click &ldquo;Settings&hellip;&rdquo;</p>

<p><img src="https://itsananderson.blob.core.windows.net/post-images/docker-settings.gif" alt="" /></p>

<p>Under the &ldquo;Shared Drives&rdquo; section, check the drives you&rsquo;d like to share, then click &ldquo;Apply&rdquo;</p>

<p><img src="https://itsananderson.blob.core.windows.net/post-images/docker-shared-drives.png" alt="" /></p>

<p>Docker will ask you for credentials, which it uses to access the drives.</p>

<p><img src="https://itsananderson.blob.core.windows.net/post-images/docker-shared-drives-credentials.png" alt="" /></p>

<p>(Note that if you log into your computer with a Windows Live account, your username should be something like &ldquo;MicrosoftAccount\you&#64;live.com&rdquo;)</p>

<p>Once you save your credentials, you should be able to share volumes from your host computer to your containers.</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>&gt;docker run -it -v c:/docker:/host ubuntu bash
</span><span class='line'>root@00aca8c2f880:/# ls /host
</span><span class='line'>test.txt
</span><span class='line'>root@00aca8c2f880:/#</span></code></pre></td></tr></table></div></figure>


		
		
	</div>


<div class="meta">
	<div class="date">








  


<time datetime="2016-07-30T21:15:38-07:00" pubdate data-updated="true">Jul 30<span>th</span>, 2016</time></div>
	<div class="tags">


	<a class='category' href='/blog/categories/docker/'>Docker</a>


</div>
	
</div>
</article>


    <article class="post">
	<h2 class="title">
		
		<a href="/blog/2015/09/05/software-engineering-and-the-no-true-scotsman-fallacy/">
		
			Software Engineering and the No True Scotsman Fallacy</a>
	</h2>
	<div class="entry-content">
		<blockquote><p>&ldquo;If you rely on jQuery you&rsquo;re a jQuery developer, not a <em>real</em> developer.&rdquo;</p>

<p>&ldquo;Nobody actually <em>enjoys</em> writing JavaScript, they just do it because it&rsquo;s the only thing that runs in the browser&rdquo;</p>

<p>&ldquo;Only academics use languages like Haskell and Lisp&rdquo;</p>

<p>&ldquo;Real developers don&rsquo;t use Windows&rdquo;</p></blockquote>

<p>If you&rsquo;ve been in the developer community for any time at all, you&rsquo;ve probably heard statements like these. They&rsquo;re popular because they&rsquo;re easy to repeat and they boost the ego of the person who says them. They&rsquo;re also over-generalizations.</p>

<p>Sure, some developers rely too heavily on jQuery. JavaScript definitely has some not-good parts that annoy many developers. Some technologies are mostly used in academia. Lots of developers prefer OS X and Linux.</p>

<p>But that&rsquo;s not the whole picture.</p>

<p>Many developers know when to use jQuery for a quick solution, and when to reach for other tools. Lots of developers actually like JavaScript, and use it everywhere they can. There are large communities of people building real software with &ldquo;academic&rdquo; technology. While you and I are tweaking our <code>.bash_profile</code>, lots of <em>real</em> developers are using Windows and Visual Studio to get shit done.</p>

<p>I believe these kinds of generalizations continue to live on partly because of the &ldquo;No true Scotsman&rdquo; fallacy.</p>

<blockquote><p><em>Person A</em>: &ldquo;No Scotsman puts sugar on his porridge.&rdquo;</p>

<p><em>Person B</em>: &ldquo;But my uncle Angus likes sugar with his porridge.&rdquo;</p>

<p><em>Person A</em>: &ldquo;Ah yes, but no <em>true</em> Scotsman puts sugar on his porridge.&rdquo;</p>

<p><strong><a href="https://en.wikipedia.org/wiki/No_true_Scotsman#Examples">No true Scotsman</a> &ndash; Wikipedia</strong></p></blockquote>

<p>The core of this fallacy is the rejection of evidence that contradicts our beliefs. It&rsquo;s sort of a rhetorical form of <a href="https://en.wikipedia.org/wiki/Confirmation_bias">confirmation bias</a>.</p>

<p>What a convenient thing to be able to say &ldquo;No real developer does X&rdquo;. Any counter-examples can be easily rejected, because obviously anyone who says &ldquo;wait, I do X&rdquo; isn&rsquo;t a real developer. No need to actually back up your claim.</p>

<p>Instead of rejecting technology, patterns, or methodologies because they&rsquo;re not what &ldquo;real developers&rdquo; use, we should be willing to listen to people who have chosen that path. They chose it for a reason, and it&rsquo;s worth hearing them out, even if their situation doesn&rsquo;t match your own.</p>

		
		
	</div>


<div class="meta">
	<div class="date">








  


<time datetime="2015-09-05T08:00:51-07:00" pubdate data-updated="true">Sep 5<span>th</span>, 2015</time></div>
	<div class="tags">


	<a class='category' href='/blog/categories/programming/'>Programming</a>


</div>
	
</div>
</article>


    <article class="post">
	<h2 class="title">
		
		<a href="/blog/2015/07/24/debugging-nodejs-azure-web-apps/">
		
			Debugging Node.js Azure Web Apps (Websites)</a>
	</h2>
	<div class="entry-content">
		<p>Deploying Node websites to Azure is really simple with their <a href="https://azure.microsoft.com/en-us/documentation/articles/web-sites-nodejs-develop-deploy-mac/#publish-your-application">Git deployment feature</a>. However, sometimes debugging problems can be challenging. Here are some of the tricks I&rsquo;ve discovered for diagnosing problems with Node apps in Azure.</p>

<h2>Viewing Application Output</h2>

<p>To view application logs (a.k.a. stdout and stderr) from your app, you can turn on Application Logging from the management portal&rsquo;s &ldquo;Configure&rdquo; tab.</p>

<p><img src="http://itsananderson.blob.core.windows.net/post-images/enable-application-logging.png" alt="" /></p>

<p>Note that application logging will only be turned on for 12 hours, so if you need to be able to see historical logs, you need to save them to a file from within your application.</p>

<p>To view the logs, you can go to the Kudu dashboard at &ldquo;&lt;yourazuresite&gt;.scm.azurewebsites.net&rdquo;.
Select either CMD or PowerShell from the &ldquo;Debug console&rdquo; menu, then navigate to <code>LogFiles/Application</code>.
Scroll until you find <code>index.html</code> and click the download button (which will display it in your browser).</p>

<p><img src="http://itsananderson.blob.core.windows.net/post-images/application-logs.png" alt="" /></p>

<p>From there you can scan through for the logs from the time period you&rsquo;re interested in and click the &ldquo;log&rdquo; link. Notice that the logs are split by &ldquo;stdout&rdquo; and &ldquo;stderr&rdquo;.</p>

<h2>Other IIS Logs</h2>

<p>To enable other IIS related logs, go to the &ldquo;site diagnostics&rdquo; section. These settings can be useful for debugging IIS level issues.</p>

<p><img src="http://itsananderson.blob.core.windows.net/post-images/enable-iis-logging.png" alt="" /></p>

<p>You can find these logs in a few different folders under &ldquo;LogFiles&rdquo; in the Kudu dashboard.</p>

<h2>Using Node Debugger</h2>

<p><a href="https://github.com/node-inspector/node-inspector">Node Inspector</a> is a really useful tool for digging into problems with your Node app.
I&rsquo;ll often spin it up locally if I&rsquo;m investigating an issue that isn&rsquo;t easily revealed with a <code>console.log</code> statement.
However, sometimes bugs only reproduce on the server. If that happens, using the version of Node Inspector built into Azure can be really useful.</p>

<h3>Enabling Websockets</h3>

<p>Node inspector uses WebSockets to communicate between the UI and the debugger backend.
Since Azure Websites doesn&rsquo;t enable them by default, you&rsquo;ll need to manually enable WebSockets in the &ldquo;Configure&rdquo; tab of the management portal.</p>

<p><img src="http://itsananderson.blob.core.windows.net/post-images/enable-websockets.png" alt="" /></p>

<h3>Check Your Web.config</h3>

<p>If you deployed your site with a Git push, Kudu should have generated a Web.config with correct configuration for debugging. If not, I have a <a href="https://gist.github.com/itsananderson/a1e65b046285f7e57c70">generalized Gist</a> that I use as a starting point. Just change the references to <code>bin/www</code> to reflect the correct entrypoint for your app.</p>

<h3>Enable Debugging</h3>

<p>To enable debugging, you can either modify your <code>Web.config</code> or create/modify an <code>iisnode.yml</code> file.</p>

<p>In the Web.config, it looks like this:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
</pre></td><td class='code'><pre><code class='xml'><span class='line'><span class="c">&lt;!-- You&#39;ll find a placeholder near the end of the generated Web.config --&gt;</span>
</span><span class='line'>    <span class="nt">&lt;iisnode</span> <span class="na">debuggingEnabled=</span><span class="s">&quot;true&quot;</span><span class="nt">/&gt;</span>
</span><span class='line'>  <span class="nt">&lt;/system.webServer&gt;</span>
</span><span class='line'><span class="nt">&lt;/configuration&gt;</span>
</span></code></pre></td></tr></table></div></figure>


<p>Or in <code>iisnode.yml</code>, it looks like this:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='xml'><span class='line'>debuggingEnabled: true
</span></code></pre></td></tr></table></div></figure>


<p>The advantage of using <code>iisnode.yml</code> is that you don&rsquo;t have to worry about a new deployment generating over your existing configuration. It&rsquo;s also worth noting that you can configure a bunch of other settings in both the <a href="https://github.com/tjanczuk/iisnode/blob/master/src/samples/configuration/iisnode.yml">iisnode.yml</a> and the <a href="https://github.com/tjanczuk/iisnode/blob/master/src/samples/configuration/web.config">Web.config</a>.</p>

<h3>Testing Out the Debugger</h3>

<p>To use the debugger, go to your azure website, and append the entry point path, and <code>/debug</code>. So for example, if your entry file was <code>server.js</code>, you&rsquo;d go to <code>&lt;yourazuresite&gt;.azurewebsites.net/server.js/debug</code></p>

<p>If everything&rsquo;s configured correctly, you should see the debugger. You can set breakpoints and debug the route handlers for your app.</p>

<p><img src="http://itsananderson.blob.core.windows.net/post-images/node-debug.png" alt="" /></p>

<p>Keep in mind that when you set a breakpoint, the entire app is halted. This means you probably don&rsquo;t want to attach the debugger to an app that&rsquo;s serving production traffic.</p>

		
		
	</div>


<div class="meta">
	<div class="date">








  


<time datetime="2015-07-24T14:35:23-07:00" pubdate data-updated="true">Jul 24<span>th</span>, 2015</time></div>
	<div class="tags">


	<a class='category' href='/blog/categories/azure/'>Azure</a>, <a class='category' href='/blog/categories/node/'>Node</a>


</div>
	
</div>
</article>


    <article class="post">
	<h2 class="title">
		
		<a href="/blog/2015/07/21/mocha-error-this-dot-timeout-is-undefined/">
		
			Mocha Error - this.timeout Is Undefined</a>
	</h2>
	<div class="entry-content">
		<p>If you&rsquo;re using an ES6 compiler like TypeScript or Babel, you may have run into an odd error when you tried to call <code>this.timeout()</code> from your Mocha tests.</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
</pre></td><td class='code'><pre><code class='javascript'><span class='line'><span class="nx">it</span><span class="p">(</span><span class="s2">&quot;foo&quot;</span><span class="p">,</span> <span class="p">(</span><span class="nx">done</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
</span><span class='line'>  <span class="k">this</span><span class="p">.</span><span class="nx">timeout</span><span class="p">(</span><span class="mi">1000</span><span class="p">);</span>
</span><span class='line'>  <span class="c1">// test some things</span>
</span><span class='line'><span class="p">});</span>
</span></code></pre></td></tr></table></div></figure>


<p>If you look at the compiled output, the source of the problem becomes evident.
The compiler is taking the value of <code>this</code> from outside the test.
This is also the behavior you&rsquo;d see if you used a JS engine with ES6 support.</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
</pre></td><td class='code'><pre><code class='javascript'><span class='line'><span class="kd">var</span> <span class="nx">_this</span> <span class="o">=</span> <span class="k">this</span><span class="p">;</span>
</span><span class='line'><span class="nx">it</span><span class="p">(</span><span class="s2">&quot;foo&quot;</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">done</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>  <span class="nx">_this</span><span class="p">.</span><span class="nx">timeout</span><span class="p">(</span><span class="mi">1000</span><span class="p">);</span>
</span><span class='line'>  <span class="c1">// test some things</span>
</span><span class='line'><span class="p">});</span>
</span></code></pre></td></tr></table></div></figure>


<p>Arrow functions specify that the scope of the &ldquo;this&rdquo; variable inside the function is the same as its scope outside the function.
Unfortunately, in this case, that isn&rsquo;t what we want. We want &ldquo;this&rdquo; to be the Mocha object that we can call <code>this.timeout()</code> on.</p>

<p>Switching back to the old-school function style fixes the problem:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
</pre></td><td class='code'><pre><code class='javascript'><span class='line'><span class="nx">it</span><span class="p">(</span><span class="s2">&quot;foo&quot;</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">done</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>  <span class="k">this</span><span class="p">.</span><span class="nx">timeout</span><span class="p">(</span><span class="mi">1000</span><span class="p">);</span>
</span><span class='line'>  <span class="c1">// test some things</span>
</span><span class='line'><span class="p">});</span>
</span></code></pre></td></tr></table></div></figure>


<p>And there you have it. Be careful with &ldquo;arrow&rdquo; functions in Mocha tests. They&rsquo;re fine to use in most cases, but if you need to call <code>this.timeout()</code>, make sure you switch back to the old-school function syntax.</p>

		
		
	</div>


<div class="meta">
	<div class="date">








  


<time datetime="2015-07-21T16:25:25-07:00" pubdate data-updated="true">Jul 21<span>st</span>, 2015</time></div>
	<div class="tags">


	<a class='category' href='/blog/categories/mocha/'>Mocha</a>, <a class='category' href='/blog/categories/node/'>Node</a>


</div>
	
</div>
</article>


    <article class="post">
	<h2 class="title">
		
		<a href="/blog/2015/07/17/viewing-all-versions-of-an-npm-package-including-pre-release/">
		
			Viewing All Versions of an NPM Package (Including Pre-Release)</a>
	</h2>
	<div class="entry-content">
		<p>If you want to view all released versions of an npm package, there&rsquo;s an easy way to do it:</p>

<p><code>npm show react-native@* version</code></p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>react-native@0.0.0 '0.0.0'
</span><span class='line'>react-native@0.0.5 '0.0.5'
</span><span class='line'>react-native@0.0.6 '0.0.6'
</span><span class='line'>react-native@0.1.0 '0.1.0'
</span><span class='line'>react-native@0.2.0 '0.2.0'
</span><span class='line'>react-native@0.2.1 '0.2.1'
</span><span class='line'>react-native@0.3.0 '0.3.0'
</span><span class='line'>react-native@0.3.1 '0.3.1'
</span><span class='line'>react-native@0.3.2 '0.3.2'
</span><span class='line'>react-native@0.3.3 '0.3.3'
</span><span class='line'>react-native@0.3.4 '0.3.4'
</span><span class='line'>react-native@0.3.5 '0.3.5'
</span><span class='line'>react-native@0.3.6 '0.3.6'
</span><span class='line'>react-native@0.3.7 '0.3.7'
</span><span class='line'>react-native@0.3.8 '0.3.8'
</span><span class='line'>react-native@0.3.9 '0.3.9'
</span><span class='line'>react-native@0.3.10 '0.3.10'
</span><span class='line'>react-native@0.3.11 '0.3.11'
</span><span class='line'>react-native@0.4.0 '0.4.0'
</span><span class='line'>react-native@0.4.1 '0.4.1'
</span><span class='line'>react-native@0.4.2 '0.4.2'
</span><span class='line'>react-native@0.4.3 '0.4.3'
</span><span class='line'>react-native@0.4.4 '0.4.4'
</span><span class='line'>react-native@0.5.0 '0.5.0'
</span><span class='line'>react-native@0.6.0 '0.6.0'
</span><span class='line'>react-native@0.7.1 '0.7.1'</span></code></pre></td></tr></table></div></figure>


<p>However, this doesn&rsquo;t show pre-release versions. If you want to see <em>everything</em>, there&rsquo;s an equally easy (but undocumented) command:</p>

<p><code>npm show react-native versions</code></p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
<span class='line-number'>31</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>[ '0.0.0',
</span><span class='line'>  '0.0.5',
</span><span class='line'>  '0.0.6',
</span><span class='line'>  '0.1.0',
</span><span class='line'>  '0.2.0',
</span><span class='line'>  '0.2.1',
</span><span class='line'>  '0.3.0',
</span><span class='line'>  '0.3.1',
</span><span class='line'>  '0.3.2',
</span><span class='line'>  '0.3.3',
</span><span class='line'>  '0.3.4',
</span><span class='line'>  '0.3.5',
</span><span class='line'>  '0.3.6',
</span><span class='line'>  '0.3.7',
</span><span class='line'>  '0.3.8',
</span><span class='line'>  '0.3.9',
</span><span class='line'>  '0.3.10',
</span><span class='line'>  '0.3.11',
</span><span class='line'>  '0.4.0',
</span><span class='line'>  '0.4.1',
</span><span class='line'>  '0.4.2',
</span><span class='line'>  '0.4.3',
</span><span class='line'>  '0.4.4',
</span><span class='line'>  '0.5.0-rc1',
</span><span class='line'>  '0.5.0',
</span><span class='line'>  '0.6.0-rc',
</span><span class='line'>  '0.6.0',
</span><span class='line'>  '0.7.0-rc',
</span><span class='line'>  '0.7.0-rc.2',
</span><span class='line'>  '0.7.1',
</span><span class='line'>  '0.8.0-rc' ]</span></code></pre></td></tr></table></div></figure>


<p>This is super useful for finding what beta/pre-release versions of a package are available.</p>

<p>You can also run <code>npm show react-native versions --json</code> for machine readable output.</p>

		
		
	</div>


<div class="meta">
	<div class="date">








  


<time datetime="2015-07-17T11:10:40-07:00" pubdate data-updated="true">Jul 17<span>th</span>, 2015</time></div>
	<div class="tags">


	<a class='category' href='/blog/categories/npm/'>NPM</a>, <a class='category' href='/blog/categories/node/'>Node</a>


</div>
	
</div>
</article>


    <article class="post">
	<h2 class="title">
		
		<a href="/blog/2015/05/24/watching-custom-directories-from-the-react-native-packager/">
		
			Watching Custom Directories From the React Native Packager</a>
	</h2>
	<div class="entry-content">
		<p>React Native projects ship with a packager that builds and serves your JavaScript resources. It also watches your project folder for changes, and rebuilds. However, if you link a Node module from a different directory, the packager won&rsquo;t see changes that are made to that package.</p>

<p>It&rsquo;s fairly easy to specify custom folders for the packager to watch. Since the React Native client sets up an <code>npm start</code> command when it generates the project, you can simply modify that script to watch additional folders.</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>"start": "node_modules/react-native/packager/packager.sh --root ~/custom-package/"</span></code></pre></td></tr></table></div></figure>


<p>Unfortunately, when you launch the project in Xcode, it runs the packager directly, rather than running the <code>npm start</code> command, but if you manually run <code>npm start</code> from a terminal window, React Native will use that rather than launching a new instance of the packager. I have an <a href="https://github.com/facebook/react-native/issues/1396">issue opened on the React Native project</a>, suggesting that they run <code>npm start</code> from Xcode, but we&rsquo;ll see if it goes anywhere.</p>

		
		
	</div>


<div class="meta">
	<div class="date">








  


<time datetime="2015-05-24T18:51:57-07:00" pubdate data-updated="true">May 24<span>th</span>, 2015</time></div>
	<div class="tags">


	<a class='category' href='/blog/categories/react-native/'>React Native</a>


</div>
	
</div>
</article>


    <article class="post">
	<h2 class="title">
		
		<a href="/blog/2015/05/08/react-native-fix-for-invariant-violation-onlychild-must-be-passed-a-children-with-exactly-one-child/">
		
			React Native: Fix for &#8220;Invariant Violation: onlyChild Must Be Passed a Children With Exactly One Child&#8221;</a>
	</h2>
	<div class="entry-content">
		<p>I recently ran into a new (to me) error in React Native.</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>Invariant Violation: onlyChild must be passed a children with exactly one child</span></code></pre></td></tr></table></div></figure>


<p>I couldn&rsquo;t find any documentation on it, so I thought I&rsquo;d share what I figured out.</p>

<p>All of the &ldquo;Touchable&rdquo; components in React Native do an <code>onlyChild</code> check on their children, which throws an error unless there&rsquo;s exactly one child.</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
</pre></td><td class='code'><pre><code class='javascript'><span class='line'><span class="k">return</span> <span class="p">(</span>
</span><span class='line'>  <span class="o">&lt;</span><span class="nx">TouchableHighlight</span><span class="o">&gt;</span>
</span><span class='line'>  <span class="o">&lt;</span><span class="err">/TouchableHighlight&gt;</span>
</span><span class='line'><span class="p">);</span> <span class="c1">// Error: onlyChild must be passed a children with exactly one child</span>
</span></code></pre></td></tr></table></div></figure>


<p>Adding a child to the TouchableHighlight will fix the error</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
</pre></td><td class='code'><pre><code class='javascript'><span class='line'><span class="k">return</span> <span class="p">(</span>
</span><span class='line'>  <span class="o">&lt;</span><span class="nx">TouchableHighlight</span><span class="o">&gt;</span>
</span><span class='line'>      <span class="o">&lt;</span><span class="nx">Text</span><span class="o">&gt;</span><span class="nx">foo</span><span class="o">&lt;</span><span class="err">/Text&gt;</span>
</span><span class='line'>  <span class="o">&lt;</span><span class="err">/TouchableHighlight&gt;</span>
</span><span class='line'><span class="p">);</span> <span class="c1">// OK</span>
</span></code></pre></td></tr></table></div></figure>


<p>But adding multiple children will also cause an error</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
</pre></td><td class='code'><pre><code class='javascript'><span class='line'><span class="k">return</span> <span class="p">(</span>
</span><span class='line'>  <span class="o">&lt;</span><span class="nx">TouchableHighlight</span><span class="o">&gt;</span>
</span><span class='line'>      <span class="o">&lt;</span><span class="nx">Text</span><span class="o">&gt;</span><span class="nx">foo</span><span class="o">&lt;</span><span class="err">/Text&gt;</span>
</span><span class='line'>      <span class="o">&lt;</span><span class="nx">Text</span><span class="o">&gt;</span><span class="nx">bar</span><span class="o">&lt;</span><span class="err">/Text&gt;</span>
</span><span class='line'>  <span class="o">&lt;</span><span class="err">/TouchableHighlight&gt;</span>
</span><span class='line'><span class="p">);</span> <span class="c1">// Error: onlyChild must be passed a children with exactly one child</span>
</span></code></pre></td></tr></table></div></figure>


<p>A quick search through the React Native code reveals the components that verify onlyChild:</p>

<ul>
<li>TouchableBounce</li>
<li>TouchableHighlight</li>
<li>TouchableOpacity</li>
<li>TouchableWithFeedback</li>
</ul>


<p>Hopefully React Native can eventually provide a better message for this issue, but until then, at least this blog post should pop up when you Google the error.</p>

		
		
	</div>


<div class="meta">
	<div class="date">








  


<time datetime="2015-05-08T07:37:37-07:00" pubdate data-updated="true">May 8<span>th</span>, 2015</time></div>
	<div class="tags">


	<a class='category' href='/blog/categories/react/'>React</a>, <a class='category' href='/blog/categories/react-native/'>React Native</a>


</div>
	
</div>
</article>


    <article class="post">
	<h2 class="title">
		
		<a href="/blog/2015/05/07/react-this-dot-state-is-undefined/">
		
			React: this.state Is Undefined</a>
	</h2>
	<div class="entry-content">
		<p>I ran into this today, so I&rsquo;m writing it down in case it helps someone else.</p>

<p>Running something like the following, I found that <code>this.state</code> was undefined during render.</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
</pre></td><td class='code'><pre><code class='javascript'><span class='line'><span class="kr">class</span> <span class="nx">MyComponent</span> <span class="kr">extends</span> <span class="nx">Component</span> <span class="p">{</span>
</span><span class='line'>  <span class="nx">getInitialState</span><span class="p">()</span> <span class="p">{</span>
</span><span class='line'>      <span class="k">return</span> <span class="p">{</span> <span class="nx">count</span><span class="o">:</span> <span class="mi">0</span> <span class="p">};</span>
</span><span class='line'>  <span class="p">}</span>
</span><span class='line'>
</span><span class='line'>  <span class="nx">render</span><span class="p">()</span> <span class="p">{</span>
</span><span class='line'>      <span class="k">return</span> <span class="o">&lt;</span><span class="nx">div</span><span class="o">&gt;</span><span class="p">{</span><span class="k">this</span><span class="p">.</span><span class="nx">state</span><span class="p">.</span><span class="nx">count</span><span class="p">}</span><span class="o">&lt;</span><span class="sr">/div&gt;; /</span><span class="o">/</span> <span class="nb">Error</span><span class="o">:</span> <span class="k">this</span><span class="p">.</span><span class="nx">state</span> <span class="nx">is</span> <span class="kc">undefined</span>
</span><span class='line'>  <span class="p">}</span>
</span><span class='line'><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>


<p>After a little searching, I found the <a href="https://facebook.github.io/react/blog/2015/01/27/react-v0.13.0-beta-1.html#es6-classesa">release notes for React 0.13.0-beta-1</a>, where they explained that ES6 classes should set initial state in the constructor, rather than defining a <code>getInitialState</code> method.</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
</pre></td><td class='code'><pre><code class='javascript'><span class='line'><span class="kr">class</span> <span class="nx">MyComponent</span> <span class="kr">extends</span> <span class="nx">Component</span> <span class="p">{</span>
</span><span class='line'>  <span class="nx">constructor</span><span class="p">()</span> <span class="p">{</span>
</span><span class='line'>      <span class="k">this</span><span class="p">.</span><span class="nx">state</span> <span class="o">=</span> <span class="p">{</span> <span class="nx">count</span><span class="o">:</span> <span class="mi">0</span> <span class="p">};</span>
</span><span class='line'>  <span class="p">}</span>
</span><span class='line'>
</span><span class='line'>  <span class="nx">render</span><span class="p">()</span> <span class="p">{</span>
</span><span class='line'>      <span class="k">return</span> <span class="o">&lt;</span><span class="nx">div</span><span class="o">&gt;</span><span class="p">{</span><span class="k">this</span><span class="p">.</span><span class="nx">state</span><span class="p">.</span><span class="nx">count</span><span class="p">}</span><span class="o">&lt;</span><span class="sr">/div&gt;; /</span><span class="o">/</span> <span class="nx">Yay</span><span class="p">,</span> <span class="nx">it</span> <span class="nx">works</span><span class="o">!</span>
</span><span class='line'>  <span class="p">}</span>
</span><span class='line'><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>


<p>Pretty simple, but not immediately obvious if you don&rsquo;t know about it.</p>

		
		
	</div>


<div class="meta">
	<div class="date">








  


<time datetime="2015-05-07T23:42:13-07:00" pubdate data-updated="true">May 7<span>th</span>, 2015</time></div>
	<div class="tags">


	<a class='category' href='/blog/categories/react/'>React</a>


</div>
	
</div>
</article>


    <article class="post">
	<h2 class="title">
		
		<a href="/blog/2015/05/07/configuring-an-existing-octopress-site-on-a-new-machine/">
		
			Configuring an Existing Octopress Site on a New Machine</a>
	</h2>
	<div class="entry-content">
		<p>Every time I set up a new machine, I have to figure out how write posts on my <a href="http://octopress.org">Octopress</a> blog. I usually follow <a href="https://github.com/colca/colca.github.com/blob/source/source/_posts/2014-01-27-octopress-sync-octopress-on-different-machines.markdown">these instructions</a>, but have to tweak them slightly to work for me. I fanally decided to write down the exact steps I use so I don&rsquo;t have to figure them out every time. Hopefully it&rsquo;s useful for someone else as well.</p>

<h3>Step 1 &ndash; Run Octopress setup</h3>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>git clone git://github.com/imathis/octopress.git octopress
</span><span class='line'>cd octopress    # If you use RVM, You'll be asked if you trust the .rvmrc file (say yes).
</span><span class='line'>ruby --version  # Should report Ruby 1.9.3
</span><span class='line'>gem install bundler # On Linux/OSX you may need to run "sudo gem install bundler" instead
</span><span class='line'>bundle install
</span><span class='line'>rake install
</span><span class='line'>rake setup_github_pages</span></code></pre></td></tr></table></div></figure>


<p>The main purpose of setting up Octopress like this is to get the main layout configured correctly.</p>

<h3>Step 2 &ndash; Reset to your blog&rsquo;s branch tips</h3>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>git fetch origin source
</span><span class='line'>git branch --set-upstream-to=origin/source source
</span><span class='line'>git reset --hard origin/source
</span><span class='line'>cd _deploy
</span><span class='line'>git fetch origin master
</span><span class='line'>git branch --set-upstream-to=origin/master master
</span><span class='line'>git reset --hard origin master</span></code></pre></td></tr></table></div></figure>


		
		
	</div>


<div class="meta">
	<div class="date">








  


<time datetime="2015-05-07T22:59:57-07:00" pubdate data-updated="true">May 7<span>th</span>, 2015</time></div>
	<div class="tags">


	<a class='category' href='/blog/categories/octopress/'>Octopress</a>


</div>
	
</div>
</article>


    <article class="post">
	<h2 class="title">
		
		<a href="/blog/2015/03/27/obvious-code/">
		
			Obvious Code</a>
	</h2>
	<div class="entry-content">
		<p>A week or two ago, I got this feedback on a code review:</p>

<blockquote><p>You&rsquo;re using <code>foo ? foo : ""</code> here.
It would be shorter and more obvious if you wrote it as <code>foo || ""</code></p></blockquote>

<p>This was valid feedback, and I updated the code.</p>

<p>After I&rsquo;d checked in my changes, I got the following IM from a senior member of my team:</p>

<blockquote><p>I see you did <code>foo || ""</code>? What does the <code>||</code> mean?</p></blockquote>

<p>:)</p>

<p>This was a good reminder of two things:</p>

<ul>
<li>&ldquo;Obvious code&rdquo; is a subjective concept</li>
<li>No matter how experienced you are with something, you&rsquo;ll still find blind spots from time to time</li>
</ul>


<p><em>P.S.</em> If that syntax is also new to you, it&rsquo;s taking advantage of how JavaScript does &ldquo;or&rdquo;.
A JavaScript <em>or</em> returns the first <em>truthy</em> value, or the last value if none are truthy:</p>

<p>e.g. <code>(false || 0) === 0</code> and <code>(0 || false) === false</code> and <code>(foo || "") === ""</code> (assuming foo is &ldquo;falsey&rdquo;)</p>

<p>Many JavaScript developers use this behavior as a shortcut for setting default values, because <code>null</code> and <code>undefined</code> are falsey.</p>

		
		
	</div>


<div class="meta">
	<div class="date">








  


<time datetime="2015-03-27T04:10:17-07:00" pubdate data-updated="true">Mar 27<span>th</span>, 2015</time></div>
	<div class="tags">


	<a class='category' href='/blog/categories/javascript/'>JavaScript</a>


</div>
	
</div>
</article>

<nav id="pagenavi">
    
    
        <a href="/blog/page/2/" class="next">Next</a>
    
    <div class="center"><a href="/blog/archives">Blog Archives</a></div>
</nav></div>
	<footer id="footer" class="inner">Copyright &copy; 2016

    Will Anderson

</footer>
	<script src="/javascripts/slash.js"></script>





<!-- Drip -->
<script type="text/javascript">
  var _dcq = _dcq || [];
  var _dcs = _dcs || {};
  _dcs.account = '7508815';
  (function() {
    var dc = document.createElement('script');
    dc.type = 'text/javascript'; dc.async = true;
    dc.src = '//tag.getdrip.com/7508815.js';
    var s = document.getElementsByTagName('script')[0];
    s.parentNode.insertBefore(dc, s);
  })();
</script>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-6776456-2', 'willi.am');
  ga('send', 'pageview');

</script>

</body>
</html>